<div class="chat-header">
    <div class="chat-header-info">
        <div class="chat-header-avatar">
            {% for participant in conversation.participants.all %}
                {% if participant != current_user %}
                    {{ participant.username|first|upper }}
                {% endif %}
            {% empty %}
                ?
            {% endfor %}
        </div>
        <div class="chat-header-details">
            <h4>
                {% for participant in conversation.participants.all %}
                    {% if participant != current_user %}
                        {{ participant.username }}
                    {% endif %}
                {% endfor %}
            </h4>
            <div class="status" id="typingStatus">
                Online
            </div>
        </div>
    </div>
</div>

<div class="messages-container" id="messagesContainer">
    <!-- Messages will be loaded here -->
</div>

<div class="typing-indicator" id="typingIndicator" style="display: none;">
    Someone is typing...
</div>


<div class="message-input-container">
    <textarea 
        class="message-input" 
        id="messageInput" 
        placeholder="Type a message" 
        rows="1"
        onkeydown="handleKeyDown(event)"
        oninput="handleTyping()"
    ></textarea>
    <button class="send-button" id="sendButton" onclick="sendMessage()" disabled>
        <i class="fas fa-paper-plane"></i>
    </button>
</div>
